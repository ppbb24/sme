# Smart Eye — 全功能界面设计任务书

> 交给 Claude Code 的完整任务说明。请先阅读 HANDOFF.md 了解已有设计决策，再根据本文档补齐所有页面。

---

## 一、产品全景

Smart Eye 是工业视觉检测软件，完整功能架构如下：

```
Smart Eye
├── 顶部导航栏（全局）
│   ├── 相机管理（设备管理）
│   ├── 工作台
│   │   ├── 制作标准样机（装机调试）  ← 已完成
│   │   └── ODS 批量快速装机         ← 已完成
│   └── 点位配方管理
│
├── 需要新设计的模块
│   ├── 样机管理
│   └── 运行诊断
```

---

## 二、已完成的页面（在现有 Demo 中）

以下页面已在 `Smart Eye 装机调试与ODS交互Demo.jsx` 中实现，继续迭代即可：

1. **工作台首页** — 双卡片入口
2. **装机调试** — 四步向导（位置与姿态、清晰度、亮度、色度）
3. **ODS** — 配方选择 → 双图对比四步校准

---

## 三、需要实现的页面

### 3.1 相机管理（设备管理）

**定位**：管理所有连接的工业相机设备，查看状态、配置参数、分组管理。

**页面结构**：
- 左侧：设备树/列表（按产线分组，如 cam-line-1、cam-line-2）
- 右侧：选中设备的详情面板

**设备列表项信息**：
- 设备名称（如 cam-line-1）
- 连接状态（在线/离线/异常）— 用绿/灰/红色圆点
- 设备类型/型号
- IP 地址
- 所属产线

**设备详情面板应包含**：
- 基本信息卡片：设备名称、型号、序列号、固件版本、IP、MAC地址
- 连接状态与最后在线时间
- 当前配方绑定信息（绑定了哪个点位的哪个配方）
- 实时预览缩略图（模拟即可）
- 操作按钮：重连、重启、编辑、删除

**交互要求**：
- 支持搜索/筛选设备
- 支持按产线折叠展开
- 添加新设备按钮（弹窗表单：名称、IP、类型等）
- 设备离线时详情面板显示告警提示

---

### 3.2 点位配方管理

**定位**：管理所有点位及其下的配方文件，是装机调试和ODS的数据源。

**页面结构**：
- 左侧：点位树形结构（设备 > 工位 > 点位）
  - 例：cam-line-1 > 左工位 > 引导、检测
  - 例：cam-line-1 > 右工位 > 引导、定位
- 右侧：选中点位下的配方列表

**点位树**：
- 三级结构：设备 → 工位 → 点位
- 每个节点可折叠展开
- 点位旁显示配方数量角标
- 支持右键菜单（新建子节点、重命名、删除）

**配方列表（选中某个点位后）**：
- 卡片或表格形式展示该点位下的所有配方
- 每个配方显示：名称、缩略图（参考图）、创建时间、最后修改时间、状态标签（标准配方/草稿）
- 标准配方有特殊标识（绿色边框或星标）
- 操作：查看详情、编辑（进入装机调试）、复制、删除、设为标准配方

**配方详情弹窗/面板**：
- 参考图预览（大图）
- 四步参数总览（位置、清晰度、亮度、色度的关键指标值）
- 创建/修改时间线
- 适用设备列表

---

### 3.3 样机管理（新设计）

**定位**：管理所有「样机配方」——即 ODS 校准后保存的配方。与标准配方区分，属于具体设备的实例配方。

**设计思路**：
- 样机配方 = 标准配方 + 设备差异调整
- 每台设备的每个点位可能有一个样机配方
- 需要能追溯来源（基于哪个标准配方校准的）

**页面结构**：
- 顶部：筛选栏（按设备、产线、点位类型、校准状态筛选）
- 主区域：样机列表（表格形式更适合批量查看）

**样机列表表格列**：
- 设备名称
- 点位名称
- 基准标准配方（来源）
- 校准时间
- 校准状态（全部通过 / 部分通过 / 未校准）— 用绿/橙/灰标签
- 四步状态缩略（四个小圆点：绿=通过、红=失败、灰=未检测）
- 操作：查看详情、重新校准（跳转ODS）、导出

**样机详情页/弹窗**：
- 上半部分：设备信息 + 基准标准配方信息
- 下半部分：四步校准结果详情
  - 每步显示：状态、关键指标对比（标准值 vs 样机值 vs 偏差）
  - 与 ODS 中的偏差指标展示风格一致
- 底部：校准历史记录（时间线形式，每次校准的结果快照）

**批量操作**：
- 勾选多台设备 → 批量重新校准
- 导出校准报告（模拟按钮即可）

---

### 3.4 运行诊断（新设计）

**定位**：对已部署的设备进行运行时监控和诊断，发现成像质量劣化、设备异常等问题。

**设计思路**：
- 这是一个监控 Dashboard，偏数据展示和告警
- 运维人员日常巡检使用
- 能快速发现哪些设备/点位出了问题

**页面结构**：

**顶部概览卡片（4张）**：
- 设备总数 / 在线数
- 今日检测次数
- 异常告警数（红色高亮）
- 平均成像合格率（百分比+趋势箭头）

**中部：设备状态网格**：
- 按产线分组，每台设备一个小卡片
- 卡片显示：设备名、状态色块（绿=正常/黄=警告/红=异常）、最近一次检测得分
- 点击卡片展开详情或跳转

**下部：告警列表**：
- 时间线形式的告警记录
- 每条告警：时间、设备、点位、告警类型、严重级别、简要描述
- 告警类型示例：
  - 清晰度下降（对焦漂移）
  - 亮度异常（光源衰减）
  - 白平衡偏移
  - 设备离线
  - 校准过期（超过N天未重新校准）
- 严重级别：紧急(红)、警告(橙)、提示(蓝)
- 操作：查看详情、跳转ODS重新校准、标记已处理

**设备诊断详情页（点击某设备进入）**：
- 设备基本信息
- 各点位当前状态卡片（每个点位的四步指标实时值）
- 历史趋势图（模拟）：清晰度评分、亮度差异值随时间变化的折线图
- 最近告警列表
- 快捷操作：跳转ODS校准、查看配方、重启设备

---

## 四、全局导航更新

现有顶部导航栏需要扩展，完整结构：

```
[Smart Eye Logo] | 相机管理 | 工作台 | 点位配方管理 | 样机管理 | 运行诊断 |        [状态图标区]
```

- 当前选中的 Tab 高亮（绿色文字 + 底部绿色指示线）
- 样机管理和运行诊断是新增的导航项

---

## 五、视觉规范（统一）

| 元素 | 值 |
|------|-----|
| 背景色 | #1e1e1e（主区域）、#252525（面板/侧栏）、#2a2a2a（次级区域） |
| 主色调 | #8bc34a（Smart Eye 品牌绿） |
| 成功/通过 | #8bc34a / #4caf50 |
| 失败/告警 | #ef5350 / #c62828 |
| 警告 | #ff9800 / #ef6c00 |
| 信息/链接 | #2196f3 / #1565c0 |
| 文字主色 | #eee（标题）、#ccc（正文）、#888（次要）、#666（禁用） |
| 边框 | #333（分割线）、#444（输入框边框） |
| 字体 | PingFang SC, Microsoft YaHei, Noto Sans SC, sans-serif |
| 图标库 | Lucide Icons（lucide-react） |
| 圆角 | 卡片 8-10px、按钮 5px、输入框 3-4px |
| 间距 | 面板内边距 14px、组件间距 8-12px |

---

## 六、技术要求

- 单文件 React 组件（JSX），所有页面在一个文件中通过路由/状态切换
- 使用 React Hooks（useState, useEffect, useCallback）
- 样式用内联 style（保持单文件）
- 图标用 lucide-react
- 数据用模拟数据，交互状态完整
- 所有状态反馈都要可体验（PASS/FAIL/Loading/Empty 等）
- 表格支持排序指示（视觉上有排序箭头即可）
- 搜索/筛选功能需要可交互

---

## 七、执行建议

1. 先读 `HANDOFF.md` 了解已有设计的完整上下文
2. 在现有 `Smart Eye 装机调试与ODS交互Demo.jsx` 基础上扩展
3. 更新顶部导航栏，添加新的导航项
4. 依次实现：相机管理 → 点位配方管理 → 样机管理 → 运行诊断
5. 保持视觉风格与现有页面完全一致
6. 确保所有页面间的跳转逻辑正确（如从诊断页跳转ODS、从配方管理进入装机调试等）
